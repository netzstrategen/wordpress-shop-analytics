"use strict";!function(e){function t(){"order-received"===shop_analytics_endpoint_data.step&&a()}function a(){var t=e(document).find(".shop-analytics-order-details"),a=t.data(),c=String(a.id),o=JSON.parse(localStorage.getItem("shop-analytics-tracked-orders"));if(!o||!o.includes(c)){o.push(c),localStorage.setItem("shop-analytics-tracked-orders",JSON.stringify(o));var i=t.find(".shop-analytics-product-details"),n={event:"EECpurchase",ecommerce:{purchase:{actionField:{id:c,revenue:String(a.revenue).replace(/,/g,""),tax:String(a.tax).replace(/,/g,""),shipping:String(a.shipping).replace(/,/g,"")},products:r.getProductsData(i)}}};a.coupon&&(n.ecommerce.purchase.actionField.coupon=a.coupon),r.postToDataLayer(n)}}var r=document.shopAnalytics;e(t)}(jQuery);
