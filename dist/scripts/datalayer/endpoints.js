"use strict";!function(n){var i=document.shopAnalytics;n(function(){"order-received"===shop_analytics_endpoint_data.step&&function(){var e=n(document).find(".shop-analytics-order-details"),t=e.data(),r=String(t.id),a=JSON.parse(localStorage.getItem("shop-analytics-tracked-orders"));{if(a&&a.includes(r))return;a.push(r),localStorage.setItem("shop-analytics-tracked-orders",JSON.stringify(a))}var o=e.find(".shop-analytics-product-details"),c={event:"EECpurchase",ecommerce:{purchase:{actionField:{id:r,revenue:String(t.revenue).replace(/,/g,""),tax:String(t.tax).replace(/,/g,""),shipping:String(t.shipping).replace(/,/g,""),order_count:t.order_count},products:i.getProductsData(o)}}};t.coupon&&(c.ecommerce.purchase.actionField.coupon=t.coupon);i.postToDataLayer(c)}()})}(jQuery);
