"use strict";!function(o){var i=document.shopAnalytics;o(function(){"order-received"===shop_analytics_endpoint_data.step&&function(){var e=o(document).find(".shop-analytics-order-details"),t=e.data(),a=String(t.id),r=JSON.parse(localStorage.getItem("shop-analytics-tracked-orders"));{if(r&&r.includes(a))return;r.push(a),localStorage.setItem("shop-analytics-tracked-orders",JSON.stringify(r))}var c=e.find(".shop-analytics-product-details"),n={event:"EECpurchase",ecommerce:{purchase:{actionField:{id:a,revenue:String(t.revenue).replace(/,/g,""),tax:String(t.tax).replace(/,/g,""),shipping:String(t.shipping).replace(/,/g,"")},products:i.getProductsData(c)}}};t.coupon&&(n.ecommerce.purchase.actionField.coupon=t.coupon);i.postToDataLayer(n)}()})}(jQuery);
