"use strict";!function(c){var n=document.shopAnalytics;c(function(){"order-received"===shop_analytics_endpoint_data.step&&!function(){var e=c(document).find(".shop-analytics-order-details"),t=e.data(),r=String(t.id),a=JSON.parse(localStorage.getItem("shop-analytics-tracked-orders"))??[],o=localStorage.getItem("shop-analytics-order-count")?JSON.parse(localStorage.getItem("shop-analytics-order-count"))+1:t.order_count;a&&a.includes(r)||(a.push(r),localStorage.setItem("shop-analytics-tracked-orders",JSON.stringify(a)),localStorage.setItem("shop-analytics-order-count",JSON.stringify(o)),a=e.find(".shop-analytics-product-details"),e={event:"EECpurchase",ecommerce:{purchase:{actionField:{id:r,revenue:String(t.revenue).replace(/,/g,""),tax:String(t.tax).replace(/,/g,""),shipping:String(t.shipping).replace(/,/g,""),ordercount:o,currency:t.currency},products:n.getProductsData(a)}}},t.coupon&&(e.ecommerce.purchase.actionField.coupon=t.coupon),n.postToDataLayer(e))}()})}(jQuery);
